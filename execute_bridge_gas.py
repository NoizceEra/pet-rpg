from web3 import Web3
from eth_account import Account
import json

# Polygon RPC
RPC_URL = "https://polygon-rpc.com"
w3 = Web3(Web3.HTTPProvider(RPC_URL))

# Wallet
PRIVATE_KEY = "0x63d78fdcef72c7afe10aa7df9e1cf34ada39c4f152451ea2843dbf79bf0bc881"
account = Account.from_key(PRIVATE_KEY)

# LI.FI GasZip Data
TO_ADDRESS = "0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE"
DATA = "0x606326ff00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000240e5363dd6410e06ca5a2e2ab46854fd044e16612f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000036191d32b5ac022c794a00f0a8335682d7724772292e2cc9d2e1202e76acc2f64a0000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e5363dd6410e06ca5a2e2ab46854fd044e16612f0000000000000000000000000000000000000000000000001bafa9ee16e78000000000000000000000000000000000000000000000000000000000000000210500000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c6761735a697042726964676500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008437962657250617900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000bd6c7b0d2f68c2b7805d88388319cfb6ecb50ea9000000000000000000000000bd6c7b0d2f68c2b7805d88388319cfb6ecb50ea9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001bc16d674ec80000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000064e0cbc5f20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011c37937e08000000000000000000000000000890cacd9dec1e1409c6598da18dc3d634e600b4500000000000000000000000000000000000000000000000000000000000000000000"
VALUE = "0x1bc16d674ec80000" # 2 POL

# Build bridge tx
nonce = w3.eth.get_transaction_count(account.address)
gas_price = w3.eth.gas_price

tx = {
    'from': account.address,
    'to': Web3.to_checksum_address(TO_ADDRESS),
    'data': DATA,
    'nonce': nonce,
    'gas': 400000,
    'gasPrice': int(gas_price * 1.5),
    'chainId': 137,
    'value': int(VALUE, 16)
}

# Sign and send
signed_tx = account.sign_transaction(tx)

try:
    tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
    print(f"Gas Bridge TX Hash: {tx_hash.hex()}")
except Exception as e:
    print(f"Error: {e}")
